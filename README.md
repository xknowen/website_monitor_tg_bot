# Website Monitor Telegram Bot

##  –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–µ–±-—Å–∞–π—Ç–æ–≤.  
–û–Ω –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∞–π—Ç—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Å—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞, –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å) –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.  
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞.

---

##  –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/xknowen/website_monitor_tg_bot.git
cd website_monitor_tg_bot
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ
```bash
python -m venv .venv
source .venv/bin/activate   # Linux / macOS
.venv\Scripts\activate      # Windows
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements.txt
```

### 4. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
–ü—Ä–∏–º–µ—Ä:
```env
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
DATABASE_URL=sqlite+aiosqlite:///./site_monitor.db
CHECK_TIMEOUT=10
DEFAULT_INTERVAL=60
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
python -m app.main
```

### 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
```bash
pytest -q
```

> üí° –ë–∞–∑–∞ SQLite —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ (`site_monitor.db` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞).

---

##  –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
app/
‚îú‚îÄ‚îÄ api/              # –ú–∞—Ä—à—Ä—É—Ç—ã API (sites, checks)
‚îú‚îÄ‚îÄ core/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ª–æ–≥–≥–µ—Ä
‚îú‚îÄ‚îÄ db/               # –ú–æ–¥–µ–ª–∏, CRUD, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îú‚îÄ‚îÄ services/         # –õ–æ–≥–∏–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ main.py           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
tests/                # –¢–µ—Å—Ç—ã
.env.example          # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
requirements.txt      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## üóÑ –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```
Site
- id (PK)
- url (string)
- created_at (datetime)

Check
- id (PK)
- site_id (FK -> Site.id)
- status (int, nullable)
- response_time (float, nullable)
- is_available (bool)
- checked_at (datetime)
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite.  
–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è PostgreSQL –∏–ª–∏ –¥—Ä—É–≥–∞—è –°–£–ë–î:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥—Ä–∞–π–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, asyncpg).
2. –£–∫–∞–∂–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `.env`, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```env
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/monitor
```
